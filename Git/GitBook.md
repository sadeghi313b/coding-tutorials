##### ۲. نصب GitBook CLI
در ترمینال (CMD یا Terminal) دستور زیر را وارد کنید:
```shell ln=false
npm install -g gitbook-cli
```
##### ۳. رفتن به پوشه پروژه
```shell ln=false
cd path/to/yourProject
```
##### ۴. راه‌اندازی کتاب به صورت آفلاین
```shell ln=false
gitbook serve
```
- این دستور یک سرور محلی راه می‌اندازد.
- کتاب شما در مرورگر باز می‌شود: [http://localhost:4000](http://localhost:4000)
- تمام تغییرات فایل‌ها **زنده (Live Reload)** نمایش داده می‌شود.
> ✅ بدون نیاز به اینترنت — فقط روی کامپیوتر شما کار می‌کند.
##### ۵. ساخت خروجی آفلاین (PDF, ePub, Mobi)
اگر بخواهید کتاب را به صورت فایل ذخیره کنید:
```shell ln=false
gitbook pdf ./ ./mybook.pdf
gitbook epub ./ ./mybook.epub
```
(نیاز به نصب `calibre` دارد)
### ✅ روش ۳: استفاده از **Docusaurus + Markdown** (جایگزین قدرتمند و رایگان)
و [Docusaurus](https://docusaurus.io) یک ابزار رایگان از طرف Meta (فیسبوک) است که شبیه GitBook عمل می‌کند و **کاملاً آفلاین و دسکتاپی** است.
#### مزایا:
- ساخت سایت مستندات با منوی سمت چپ
- پشتیبانی از فایل‌های Markdown
- قابلیت جستجو، تم تاریک، چندزبانه
- خروجی HTML, PDF
#### نحوه استفاده:
```shell ln=false
npx create-docusaurus@latest my-website classic
cd my-website
npm run start
```
سپس فایل‌های Markdown خود را در پوشه `docs` قرار دهید.

---
خطایی که گرفتی به این دلیل است که **GitBook 3.2.3 خیلی قدیمی است** (سال‌هاست دیگر پشتیبانی نمی‌شود) و با نسخه‌های جدید Node.js (مثل `v22.17.0`) سازگار نیست.
### دلیل خطا
- کتابخانه `graceful-fs` که GitBook استفاده می‌کند قدیمی است.
- این کتابخانه در نسخه‌های جدید Node.js دیگر درست کار نمی‌کند.
- به همین خاطر تابع `cb.apply` روی callback درست صدا زده نمی‌شود و خطا می‌دهد.
### راه‌حل‌ها
چند راه‌حل داری:
#### 🔹 ۱. استفاده از Node.js قدیمی‌تر
GitBook 3.2.3 فقط روی نسخه‌های قدیمی Node (مثلاً **Node.js v10 یا v12**) درست کار می‌کند.  
می‌توانی با استفاده از **nvm** (Node Version Manager) نسخه مناسب را نصب و فعال کنی:
```bash
# اگر روی ویندوز هستی:
nvm install 12.22.12
nvm use 12.22.12
# اگر روی لینوکس/مک هستی:
nvm install 12
nvm use 12
```
بعد دوباره امتحان کن:
```bash
gitbook serve
```
---
#### 🔹 ۲. استفاده از نسخه جایگزین GitBook
نسخه اصلی GitBook دیگر پشتیبانی نمی‌شود. اما یک fork به نام **HonKit** ساخته شده که همان GitBook است ولی با Node.js جدید سازگار:
```bash
npm install -g honkit
```
بعدش:
```bash
honkit serve
```
---
#### 🔹 ۳. مهاجرت به ابزارهای جدید
اگر تازه شروع کرده‌ای، بهتر است به جای GitBook از ابزارهای مدرن مثل:
- **Docusaurus** (ساخت مستندات با React)
- **VuePress / VitePress** (ساخت مستندات با Vue)
استفاده کنی، چون پشتیبانی و امکانات به‌روز دارند.
---
👉 پیشنهاد من:  
اگر پروژه‌ات قدیمی است و فقط می‌خواهی مستندات را ببینی → از **Node.js 12 با nvm** استفاده کن.  
اگر می‌خواهی روی پروژه ادامه بدهی → برو سراغ **HonKit** چون کاملاً جایگزین GitBook است.
می‌خواهی من برایت دستور کامل نصب **nvm در ویندوز** را بنویسم تا راحت GitBook را روی Node 12 اجرا کنی؟