با سلام
### File uploads در Inertia
**توضیح کلی:**  
وقتی داده‌های یک فرم شامل فایل باشند (حتی فایل‌های داخل آرایه یا ساختارهای تو در تو)، Inertia به صورت خودکار داده‌ها را به یک **FormData object** تبدیل می‌کند. این کار برای ارسال درخواست با نوع `multipart/form-data` از طریق XHR ضروری است.
- اگر بخواهید همیشه از FormData استفاده شود، حتی وقتی فایل وجود ندارد، می‌توانید گزینه‌ی **forceFormData** را فعال کنید.
**نکات تخصصی:**
- **FormData**: یک ساختار جاوااسکریپتی که به مرورگر اجازه می‌دهد داده‌های فرم شامل فایل‌ها را به سرور ارسال کند.
- **multipart/form-data**: نوع محتوایی که برای ارسال فایل در درخواست‌های HTTP استفاده می‌شود.
**مثال‌های کاربردی بدون کدنویسی:**
1. **آپلود عکس پروفایل کاربر**
    - کاربر یک عکس انتخاب می‌کند و فرم شامل اطلاعات نام و ایمیل است. Inertia به صورت خودکار همه داده‌ها را به FormData تبدیل می‌کند.
2. **ارسال مستندات برای ثبت شرکت**
    - فرم شامل چند فایل PDF و اطلاعات متنی است. با forceFormData، مطمئن می‌شوید که حتی اگر فایلی انتخاب نشده باشد، ساختار FormData حفظ می‌شود.
3. **آپلود گالری محصول در فروشگاه آنلاین**
    - چند تصویر به همراه توضیحات محصول ارسال می‌شوند. Inertia این داده‌ها را به صورت خودکار به FormData تبدیل می‌کند و نیازی به کار اضافی ندارید.
4. **ارسال فرم با فایل‌های تو در تو**
    - مثلاً فرم ثبت سفارش شامل آرایه‌ای از فایل‌ها برای هر محصول است. Inertia به طور خودکار این فایل‌ها را داخل FormData جای می‌دهد.
این قابلیت باعث می‌شود توسعه‌دهنده نیازی به نوشتن کد دستی برای تبدیل فایل‌ها به FormData نداشته باشد و فرایند آپلود فایل ساده و امن انجام شود.
با سلام
### File upload example در Inertia
**توضیح کلی:**  
این مثال نشان می‌دهد چگونه می‌توان یک فایل را همراه با داده‌های متنی در فرم با Inertia آپلود کرد. استفاده از **useForm helper** باعث می‌شود کار با فرم و پیگیری **progress آپلود** بسیار راحت شود.
**نکات مهم:**
- هرگاه فرم شامل فایل باشد، Inertia داده‌ها را به **FormData** تبدیل می‌کند.
- با استفاده از property **progress** می‌توان درصد پیشرفت آپلود را نمایش داد.
- نیازی به مدیریت دستی FormData یا XHR نیست.
**مثال‌های کاربردی بدون کدنویسی:**
1. **ثبت پروفایل کاربر با عکس**
    - فرم شامل نام کاربر و عکس پروفایل است. کاربر عکس را انتخاب می‌کند و درصد آپلود به صورت زنده نمایش داده می‌شود.
2. **ارسال رزومه و اطلاعات کاربر**
    - فرم شامل اطلاعات متنی و فایل PDF رزومه است. Inertia به صورت خودکار داده‌ها را به FormData تبدیل کرده و آپلود می‌کند.
3. **آپلود تصویر برای محصولات فروشگاه آنلاین**
    - فرم شامل نام محصول و تصویر محصول است. درصد آپلود به کاربر نشان داده می‌شود تا بتواند وضعیت ارسال فایل را دنبال کند.
4. **ارسال فایل‌های تکمیلی برای فرم درخواست مجوز**
    - فرم شامل چند فیلد متنی و یک یا چند فایل اضافی است. Inertia همه فایل‌ها را به درستی در درخواست قرار می‌دهد و progress قابل مشاهده است.
این روش باعث می‌شود آپلود فایل‌ها به صورت امن، سریع و بدون نیاز به کدنویسی اضافی برای مدیریت FormData یا XHR انجام شود.
```vue
<script setup>
import { useForm } from '@inertiajs/vue3'
// استفاده از useForm برای مدیریت داده‌های فرم و ارسال آنها به سرور
// فرم شامل دو فیلد است: name (متنی) و avatar (فایل)
const form = useForm({
  name: null,    // فیلد نام کاربر
  avatar: null,  // فیلد تصویر کاربر
})
// تابع ارسال فرم به سرور با استفاده از متد post
function submit() {
  // ارسال فرم به آدرس /users
  // Inertia به صورت خودکار فایل‌ها را به FormData تبدیل می‌کند
  form.post('/users')
}
</script>
<template>
  <form @submit.prevent="submit">
    <!-- ورودی متن برای نام -->
    <input type="text" v-model="form.name" />
    <!-- ورودی فایل برای تصویر آواتار -->
    <!-- انتخاب فایل باعث می‌شود مقدار avatar در فرم آپدیت شود -->
    <input type="file" @input="form.avatar = $event.target.files[0]" />
    <!-- نمایش پیشرفت آپلود فایل -->
    <!-- progress تنها زمانی نمایش داده می‌شود که فرم شامل فایل باشد و در حال ارسال باشد -->
    <progress v-if="form.progress" :value="form.progress.percentage" max="100">
      {{ form.progress.percentage }}%
    </progress>
    <!-- دکمه ارسال فرم -->
    <button type="submit">Submit</button>
  </form>
</template>
```
🔹 نکات کاربردی:
- Inertia خودکار داده‌های فایل را به **FormData** تبدیل می‌کند، نیازی به کار اضافی نیست.
- خاصیت `form.progress` امکان نمایش پیشرفت آپلود را فراهم می‌کند.
- می‌توان به جای helper از **manual router visits** هم استفاده کرد، اما helper کار با آپلود فایل و نمایش وضعیت را ساده‌تر می‌کند.
با سلام
### Multipart limitations در Vue + Inertia
برخی فریمورک‌ها مانند Laravel و Rails محدودیت دارند و **PUT، PATCH یا DELETE** را به صورت مستقیم با `multipart/form-data` پشتیبانی نمی‌کنند.
🔹 **راهکارها:**
1. ساده‌ترین روش این است که همیشه **POST** استفاده کنید و فایل را ارسال کنید.
2. اگر نیاز دارید از PUT یا PATCH استفاده کنید، می‌توانید از **Form Method Spoofing** استفاده کنید:
    - فایل‌ها با POST ارسال می‌شوند.
    - یک فیلد `_method` در داده‌ها اضافه می‌کنید تا سرور درخواست را به عنوان PUT یا PATCH تشخیص دهد.
**مثال کد Vue + Inertia:**
```vue
<script setup>
import { router } from '@inertiajs/vue3'
// Sending file using POST with method spoofing
router.post(`/users/${user.id}`, {
  _method: 'put',      // ← Method spoofing: tell server to treat as PUT
  avatar: form.avatar,  // ← File input
})
</script>
```
**توضیح کاربردی بدون کد:**
- فرض کنید می‌خواهید تصویر یک کاربر را به‌روزرسانی کنید.
- داده‌های فرم شامل فایل آواتار است.
- به جای ارسال مستقیم با PATCH، یک POST می‌فرستید و `_method: 'put'` اضافه می‌کنید.
- سرور (Laravel) این درخواست را به عنوان PUT پردازش می‌کند و فایل‌ها بدون مشکل آپلود می‌شوند.