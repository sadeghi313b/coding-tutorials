رایج‌ترین روش اعتبارسنجی، استفاده از متد `validate` روی تمام **درخواست‌های HTTP** است.
هدف Validation: جلوگیری از ورود داده‌های **نامعتبر یا ناقص** به سیستم.
تنها با چند خط کد می‌توان:

1. شرایط اعتبارسنجی را تعریف کرد.
    
2. داده‌ها را بررسی کرد.
    
3. پیام‌های خطا را به کاربر بازگرداند.
## نکات کلیدی

- **اصل RESTful**:
    
    - مسیر `GET` → برای نمایش فرم یا اطلاعات.
        
    - مسیر `POST` → برای ثبت داده‌ها در دیتابیس.
        
- این ساختار، یک الگوی استاندارد برای **فرم‌ها در لاراول** است.
    
- اعتبارسنجی داده‌ها معمولاً در متد `store` انجام می‌شود، چون داده‌ها از کاربر ارسال می‌شوند.
### الف) متد `create`

- خروجی: نوع `View`
    
- وظیفه: نمایش **فرم ایجاد پست جدید**.
    
- استفاده از تابع `view('post.create')` → این تابع یک فایل Blade به نام `post/create.blade.php` را نمایش می‌دهد.
    

---

### ب) متد `store`

- ورودی: شیء `Request` (حاوی داده‌های فرم ارسال‌شده).
    
- خروجی: `RedirectResponse` (بازگرداندن کاربر به یک مسیر دیگر).
    
- وظیفه:
    
    1. **اعتبارسنجی داده‌ها** (Validation).
        
    2. **ذخیره‌ی پست جدید** در دیتابیس.
        
    3. **ریدایرکت کاربر** به صفحه‌ی نمایش پست (`post.show`).
        

---

## 3. نکات کلیدی

- کنترلرها در لاراول نقش **مدیریت درخواست‌ها** را دارند.
    
- `create()` فقط فرم را نمایش می‌دهد → بدون منطق ذخیره‌سازی.
    
- `store()` داده‌ها را پردازش می‌کند و معمولاً شامل **Validation + Database Save + Redirect** است.
    
- در این مرحله کد ذخیره‌سازی خالی است (`$post = /** ... */`) و بعداً تکمیل می‌شود.
## رفتار متد `validate`

- اگر قوانین اعتبارسنجی **پاس شوند** → کد به اجرای خود ادامه می‌دهد.
    
- اگر اعتبارسنجی **ناموفق باشد** → یک استثنای `Illuminate\Validation\ValidationException` رخ می‌دهد و لاراول به طور خودکار پاسخ مناسب برمی‌گرداند:
    
    - در **درخواست‌های معمولی (HTTP)** → کاربر به آدرس قبلی **Redirect** می‌شود.
        
    - در **درخواست‌های Ajax/XHR** → یک **پاسخ JSON** شامل پیام خطاها ارسال می‌شود.
    /**
 * Store a new blog post.
 */
public function store(Request $request): RedirectResponse
{
    $validated = $request->validate([
        'title' => 'required|unique:posts|max:255',
        'body'  => 'required',
    ]);
 
    // The blog post is valid...
 
    return redirect('/posts');
}

        

---

## دو روش نوشتن قوانین اعتبارسنجی

### الف) به صورت String با `|`
$request->validate([
    'title' => 'required|unique:posts|max:255',
    'body'  => 'required',
]);

ب) به صورت آرایه (Array of rules)
$request->validate([
    'title' => ['required', 'unique:posts', 'max:255'],
    'body'  => ['required'],
]);
اعتبارسنجی با Named Error Bag
$validatedData = $request->validateWithBag('post', [
    'title' => ['required', 'unique:posts', 'max:255'],
    'body'  => ['required'],
]);
## نکات کلیدی

- متد `validate` → ساده‌ترین و پرکاربردترین روش اعتبارسنجی در کنترلر.
    
- پیام‌های خطا و مدیریت Redirect/JSON → به صورت **خودکار** توسط لاراول انجام می‌شود.
    
- امکان استفاده از **String Rules** یا **Array Rules** وجود دارد.
    
- قابلیت `validateWithBag` → برای مدیریت همزمان چند فرم یا چند بخش از اعتبارسنجی بسیار کاربردی است.
